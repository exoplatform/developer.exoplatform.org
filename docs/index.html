<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Welcome on developer.exoplatform.org!</title>
<link rel="stylesheet" href="./css/exo.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1292368-31', 'auto');
    ga('send', 'pageview');
</script>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>Welcome on developer.exoplatform.org!</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#id-sources-management">1. Sources Management</a>
<ul class="sectlevel2">
<li><a href="#id-git-repositories">1.1. Git - Repositories</a>
<ul class="sectlevel3">
<li><a href="#id-platform-codebase">1.1.1. Platform codebase</a></li>
</ul>
</li>
<li><a href="#id-git-settings">1.2. Git - Settings</a>
<ul class="sectlevel3">
<li><a href="#id-github">1.2.1. GitHub</a></li>
<li><a href="#id-git-configuration">1.2.2. Git Configuration</a></li>
<li><a href="#id-git-ides">1.2.3. Git &amp; IDEs</a></li>
</ul>
</li>
<li><a href="#id-git-workflow">1.3. Git - Workflow</a>
<ul class="sectlevel3">
<li><a href="#id-repository-architecture">1.3.1. Repository architecture</a></li>
<li><a href="#id-branching-model">1.3.2. Branching model</a></li>
<li><a href="#id-feature-branch">1.3.3. Feature Branch</a></li>
<li><a href="#id-fix-branch">1.3.4. Fix Branch</a></li>
<li><a href="#id-stable-branch">1.3.5. Stable Branch</a></li>
<li><a href="#id-integration-branch">1.3.6. Integration Branch</a></li>
<li><a href="#id-poc-branch">1.3.7. PoC Branch</a></li>
<li><a href="#id-release-process">1.3.8. Release Process</a></li>
<li><a href="#id-improvement">1.3.9. Improvement</a></li>
</ul>
</li>
<li><a href="#id-git-cheat-sheet">1.4. Git - Cheat Sheet</a>
<ul class="sectlevel3">
<li><a href="#id-features">1.4.1. Features</a></li>
<li><a href="#id-sources">1.4.2. Sources</a></li>
</ul>
</li>
<li><a href="#id-contributions">1.5. Contributions</a>
<ul class="sectlevel3">
<li><a href="#id-workflow">1.5.1. Workflow</a></li>
<li><a href="#id-community-contributions">1.5.2. Community Contributions</a></li>
<li><a href="#id-commits-messages-best-practices">1.5.3. Commits messages best practices</a></li>
<li><a href="#id-pull-requests-best-practices">1.5.4. Pull Requests best practices</a></li>
<li><a href="#id-contributions-reviews">1.5.5. Contributions reviews</a></li>
<li><a href="#id-tips-for">1.5.6. Tips for …</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#id-ide-settings-to-work-on-exo-platform-projects">2. IDE Settings to work on eXo Platform projects</a>
<ul class="sectlevel2">
<li><a href="#id-eclipse-settings">2.1. Eclipse - Settings</a>
<ul class="sectlevel3">
<li><a href="#id-clean-up-settings">2.1.1. Clean Up Settings:</a></li>
<li><a href="#id-code-templates-settings">2.1.2. Code Templates Settings:</a></li>
<li><a href="#id-formatter-settings">2.1.3. Formatter Settings:</a></li>
<li><a href="#id-organize-imports-settings">2.1.4. Organize Imports Settings:</a></li>
</ul>
</li>
<li><a href="#id-intellij-settings">2.2. IntelliJ - Settings</a></li>
</ul>
</li>
<li><a href="#id-build-management">3. Build Management</a>
<ul class="sectlevel2">
<li><a href="#id-maven-setup-guide">3.1. Maven - Setup guide</a>
<ul class="sectlevel3">
<li><a href="#id-prerequisites">3.1.1. Prerequisites</a></li>
<li><a href="#id-install-apache-maven">3.1.2. Install Apache Maven</a></li>
<li><a href="#id-configure-apache-maven">3.1.3. Configure Apache Maven</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#id-development">4. Development</a>
<ul class="sectlevel2">
<li><a href="#id-test">4.1. Test</a>
<ul class="sectlevel3">
<li><a href="#id-databases">4.1.1. Databases</a></li>
</ul>
</li>
<li><a href="#id-translations">4.2. Translations</a>
<ul class="sectlevel3">
<li><a href="#id-how-to-update-an-existing-translation-string">4.2.1. How to update an existing translation string?</a></li>
<li><a href="#id-how-to-add-a-new-translation-string-in-an-existing-localization-file">4.2.2. How to add a new translation string in an existing localization file?</a></li>
<li><a href="#id-how-to-delete-a-translation-string">4.2.3. How to delete a translation string?</a></li>
<li><a href="#id-how-to-add-a-new-localization-file">4.2.4. How to add a new localization file?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This website is centralizing all resources useful for eXo developers and contributors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<span class="icon"><i class="fa fa-file-pdf-o" title="eXo Developer PDF Version"></i></span>
<a href="http://developer.exoplatform.org/exo-developer-guide.pdf">Download this documentation as PDF version</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="id-sources-management">1. Sources Management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="id-git-repositories">1.1. Git - Repositories</h3>
<div class="sect3">
<h4 id="id-platform-codebase">1.1.1. Platform codebase</h4>
<div class="sect4">
<h5 id="id-platform-5">1.1.1.1. Platform 5</h5>
<div class="paragraph">
<p>eXo Platform is built from several projects stored in different <a href="https://www.github.com/exoplatform"><strong>Git repositories</strong></a>.
You will find below the list of repositories used to build <strong>eXo Platform 5</strong>.</p>
</div>
<div id="plf_components" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/plf5-components.png"><img src="images/plf5-components.png" alt="Platform Components"></a>
</div>
<div class="title">Figure 1. Overview of eXo Components for PLF 5.0</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/platform-public-distributions">platform-public-distributions</a>
</td>
<td class="hdlist2">
<p>Main project used to package the standalone community edition based on <a href="http://tomcat.apache.org">Apache Tomcat 8</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/platform">platform</a>
</td>
<td class="hdlist2">
<p>eXo Platform</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/integration">integration</a>
</td>
<td class="hdlist2">
<p>Integration of eXo services</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/calendar">calendar</a>
</td>
<td class="hdlist2">
<p>eXo Calendar</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/forum">forum</a>
</td>
<td class="hdlist2">
<p>eXo Forum</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/wiki">wiki</a>
</td>
<td class="hdlist2">
<p>eXo Wiki</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/social">social</a>
</td>
<td class="hdlist2">
<p>eXo Social</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/ecms">ecms</a>
</td>
<td class="hdlist2">
<p>eXo Content Management System</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/commons">commons</a>
</td>
<td class="hdlist2">
<p>Commons services</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/platform-ui">platform-ui</a>
</td>
<td class="hdlist2">
<p>eXo Platform UI customizations</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/gatein-portal">GateIn Portal</a>
</td>
<td class="hdlist2">
<p>GateIn Portal</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/gatein-sso">GateIn SSO</a>
</td>
<td class="hdlist2">
<p>GateIn SSO</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/gatein-pc">GateIn PC</a>
</td>
<td class="hdlist2">
<p>GateIn PC</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/jcr">JCR</a>
</td>
<td class="hdlist2">
<p>eXo JCR</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/ws">WS</a>
</td>
<td class="hdlist2">
<p>eXo WS</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/core">Core</a>
</td>
<td class="hdlist2">
<p>eXo Core</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/kernel">Kernel</a>
</td>
<td class="hdlist2">
<p>eXo Kernel</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.github.com/exoplatform/gatein-wci">GateIn WCI</a>
</td>
<td class="hdlist2">
<p>GateIn WCI</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="id-platform-4">1.1.1.2. Platform 4</h5>
<div id="plf_components" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/plf4-components.png"><img src="images/plf4-components.png" alt="Platform 4.4 Components"></a>
</div>
<div class="title">Figure 2. Overview of eXo Components for PLF 4.4</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-git-settings">1.2. Git - Settings</h3>
<div class="sect3">
<h4 id="id-github">1.2.1. GitHub</h4>
<div class="paragraph">
<p>GitHub is the platform we chose to host our Git repositories.
<strong>To contribute to eXo projects you have to create a <a href="https://www.github.com/">GitHub</a> account.</strong></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For eXo employees it is recommended to create one with the same username as the one provided by the company (GoogleApp Id) when you joined us.
<strong>You have to commit using your exoplatform.com email by setting it in your global git configuration or locally into each eXo repository clone</strong> (see below).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To retrieve your rights to push changes or to pull private repositories you have to register your github account into your profile in our internal IDM <a href="https://my.exoplatform.org">My eXo</a>.</p>
</div>
<div class="paragraph">
<p>GitHub provides a lot of <a href="http://help.github.com/">documentation</a> and especially an installation/configuration guide for each operating system :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://help.github.com/linux-set-up-git/">Linux</a></p>
</li>
<li>
<p><a href="http://help.github.com/win-set-up-git/">Windows</a></p>
</li>
<li>
<p><a href="http://help.github.com/mac-set-up-git/">MacOS</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please follow these guides to setup your environment.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-git-configuration">1.2.2. Git Configuration</h4>
<div class="paragraph">
<p>It is recommended to create an SSH private key (with a password) and to use it to access to your Git(Hub) repositories (see Github guides above).</p>
</div>
<div class="paragraph">
<p>By default you have at least to setup your default identity that will be used for all git instances on the system if you don&#8217;t override them locally.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global user.name "John Doe"
git config --global user.email "jdoe@exoplatform.com"</code></pre>
</div>
</div>
<div class="paragraph">
<p>We recommend also :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to configure git to activate use colors if you terminal supports it :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config color.ui true</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to configure git to push only the current branch by default to avoid to send to the server some changes in others branches you weren&#8217;t ready to share</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global push.default current</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to setup line endings preferences for Unix/Mac users</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global core.autocrlf input
git config --global core.safecrlf true</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to setup line endings preferences for Windows users</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global core.autocrlf true
git config --global core.safecrlf true</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to reduce the number of files to consider when performing rename detection during a merge. The merge is working pretty well on small repositories (with move and rename of files). But it&#8217;s not working on large repositories as the detection of file renaming is O(n²), so we need to update some threshold (more explanations are available in this post : <a href="http://blogs.atlassian.com/2011/10/confluence_git_rename_merge_oh_my/">http://blogs.atlassian.com/2011/10/confluence_git_rename_merge_oh_my/</a>) :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"> git config --global merge.renameLimit 10000</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>to configure git to add some command aliases to easily call them with <code>git &lt;ALIAS_NAME&gt;</code>.
You just add a section <code>[alias]</code> in your <code>~/.gitconfig</code> file with entries like bellow</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">[alias]

[source]
##### Basic aliases
# Long status
st = status
# Short status
s = status -s
# Show all branches
br = branch -a
# Show branches with commit message
sb = show-branch
# Commit
ci = commit
# Checkout
co = checkout
# Show remote repositories
r  = remote -v
# Amend last commit
amend = ci --amend
# Removes files/directories from staging
unadd = rm -r --cached

##### Diff aliases
# Diff and show commands with word-diff style
wd = diff --word-diff
ws = show --word-diff
# Show diff before pull
do = diff ORIG_HEAD HEAD
# Show modified lines in the index
staged = diff --cached
# Show modified files
changes= diff --name-status -r
# Diff with statistics
ds = diff --stat -r

##### Log aliases
# Show HEAD commit
head = log --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --date=relative -n1
# Short one line logs with ref-names
l  = log --oneline --decorate=short
# Shows the last git logentry (hash, author, date commitmessage)
llm = log -1
# Short one line logs with ref-names and statistics
gl = log --oneline --decorate --stat --graph
# Short one line logs with ref-names (yellow, date (green) and author (blue)
glog = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --date=relative
# Show last commit
lc = log ORIG_HEAD.. --stat --no-merges
# Graph log with full commit message
glaaa = log --graph --abbrev-commit --date=relative

##### Misc
# Show last commiter
whois = !sh -c 'git log -i -1 --pretty=\"format:%an &lt;%ae&gt;\n\" --author=\"$1\"' -
# Show last commit message
whatis = show -s --pretty='tformat:%h (%s, %ad)' --date=short
# Hash of HEAD
h = rev-list --max-count=1 HEAD
# Show users which have commits in current branch
ul = !git log --format='%aN' | sort -u
# Number of commits in current branch
c  = !git log --oneline | wc -l
# Creates a tar.gz archive named after the last commits hash from HEAD! in the directory above the repository
ahg = !git archive HEAD --format=tar | gzip &gt; ../`git h`.tar.gz
# shows ignored directories
ignored = !git ls-files --others -i --exclude-standard --directory
# Move to the root of the repository
root = !cd $(git rev-parse --show-cdup)
# Show the root directory of the repository
sroot = rev-parse --show-toplevel
# Prune remote branches
prune-all = !git remote | xargs -n 1 git remote prune
# Show aliases
aliases = !git config --get-regexp 'alias.*' | colrm 1 6 | sed 's/[ ]/ = /'
# Show upstream for the current branch
upstream = !git for-each-ref --format='%(upstream:short)' `git symbolic-ref HEAD`</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-git-ides">1.2.3. Git &amp; IDEs</h4>
<div class="paragraph">
<p>Git is natively supported by all IDE :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse : <a href="http://www.eclipse.org/egit/">EGit plugin</a> bundled by default in the major part of eclipse distributions.</p>
</li>
<li>
<p>IntelliJ : <a href="http://www.jetbrains.com/idea/webhelp/using-git-integration.html">Native</a></p>
</li>
<li>
<p>Netbeans : <a href="http://netbeans.org/projects/versioncontrol/pages/Git_main">Native since 7.1</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-git-workflow">1.3. Git - Workflow</h3>
<div class="paragraph">
<p>Our workflow is built on two principles :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>repository architecture</strong> (development vs blessed) that has to be followed by <strong>all projects involved in products</strong> produced eXo (and thus that require to be supported).</p>
</li>
<li>
<p>The <strong>branching model</strong> that has to be followed by <em>all projects</em> at eXo</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="id-repository-architecture">1.3.1. Repository architecture</h4>
<div class="paragraph">
<p>Aiming security and backup purpose, we are using two repository kinds (owned by two distinct github organizations).</p>
</div>
<div class="paragraph">
<p>These are <code>blessed</code> and <code>development</code> repositories hosted respectively on <a href="https://github.com/exoplatform">exoplatform</a> and <a href="https://github.com/exodev">exodev</a> organizations.</p>
</div>
<div class="paragraph">
<p>Development repositories are forked from blessed repositories.</p>
</div>
<div class="paragraph">
<p><strong>This strategy is applied to all repositories/projects involved in eXo products.</strong> Others projects are using a single repository hosted on "exoplatform" organization.</p>
</div>
<div id="git_organization" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-organization.png"><img src="images/git-organization.png" alt="Git Organization" width="600"></a>
</div>
<div class="title">Figure 3. Git Repository Architecture</div>
</div>
<div class="sect4">
<h5 id="id-development-repository">1.3.1.1. Development repository</h5>
<div class="paragraph">
<p>This repository is the developers repository. The main development branch is <code>develop</code> branch. Depending the contribution kind (one shot contribution or feature contribution), the developer can use a dedicated <code>feature</code> branch if needed.
The most of development activity will be done in this repository by a lot of contributors :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>maintainers</code> (formerly known as <code>sl3</code>) : To develop fix. These developments are done in dedicated <code>fix</code> branches (more details below).</p>
</li>
<li>
<p><code>all development teams</code> : To do one shot contribution and handle feature branch life cycle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this repository, <code>develop</code> branch and <code>feature</code> branch will be under CI.</p>
</div>
</div>
<div class="sect4">
<h5 id="id-blessed-repository">1.3.1.2. Blessed repository</h5>
<div class="paragraph">
<p>In this repository you can find <code>stable</code> branches and release tags.
Only some people are able to write on this repository :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>maintainers</code> : To integrate pull request on stable branches.</p>
</li>
<li>
<p><code>release manager</code> : To perform release operations on stable (supported) branches.</p>
</li>
<li>
<p><code>keepers</code> : Repository keepers are <code>Project Leader</code>, <code>Team Leader</code> and <code>Technical Leader</code>. They are able to pull changes from dev to blessed when the develop is stable enough and they can process releases for non supported versions of products (alpha, beta, RCs, …)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The continuous integration is applied on stables branches (<code>stable/1.0.x</code>, <code>stable/1.1.x</code>, etc) on blessed repository.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-branching-model">1.3.2. Branching model</h4>
<div class="paragraph">
<p>Branching model are 6 kinds of branch :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>develop</code> : Develop branch contains the latest delivered development changes.</p>
</li>
<li>
<p><code>feature/xxx</code> : Feature branches are dedicated branch for one big feature (lot of commits), "xxx" is the feature name.</p>
</li>
<li>
<p><code>stable/xxx</code> : Stable branch are used to perform releases and write / accept fix. "xxx" is the stable version name (e.g 1.0.x).</p>
</li>
<li>
<p><code>fix/xxx</code> : Fix branch is dedicated to integrate bugfix on Develop branch. If needed the fix is then cherry pick on stable branch.</p>
</li>
<li>
<p><code>integration/xxx</code> : Integration branches are dedicated branch to automatic integration task (like Crowdin translation).</p>
</li>
<li>
<p><code>poc/xxx</code> : Poc branches are dedicated branch to develop a Prove of Concept (PoC).</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="id-develop-branch">1.3.2.1. Develop Branch</h5>
<div class="paragraph">
<p>Develop branch contains the latest delivered development changes.
This is our backbone where all the different fix and new feature are mixed with each other.</p>
</div>
<div id="git-workflow-develop-branch" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-workflow-develop-branch.png"><img src="images/git-workflow-develop-branch.png" alt="Git Workflow - Develop Branch" width="600"></a>
</div>
<div class="title">Figure 4. Git Workflow - Develop Branch</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-feature-branch">1.3.3. Feature Branch</h4>
<div class="paragraph">
<p>Feature branches are dedicated branch to develop a new feature.</p>
</div>
<div id="git-workflow-feature-branch" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-workflow-feature-branch.png"><img src="images/git-workflow-feature-branch.png" alt="Git Workflow - Feature Branch" width="300"></a>
</div>
<div class="title">Figure 5. Git Workflow - Feature Branch</div>
</div>
<div class="sect4">
<h5 id="id-actions">1.3.3.1. Actions</h5>
<div class="sect5">
<h6 id="id-create-a-new-feature-branch">Create a new Feature Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> A new feature is specified and planified.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> PL/TL</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you want the branch deploy on Acceptance, do not create the branch by yourself but create a SWF ticket on Jira for the full package (Branches+CI+Acceptance).</p>
</li>
<li>
<p>If it’s a local feature project without need for CI or Acceptance you can create it by yourself.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="id-rebase-develop-to-feature-branch">Rebase Develop to Feature Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> Frequently</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Team responsible of the branch with support of team responsible each project.</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout develop
git pull
git checkout feature/x
git rebase develop
git push --force</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-merge-feature-branch-to-develop">Merge Feature Branch to Develop</h6>
<div class="paragraph">
<p><strong>When:</strong> Feature has been successfully tested by FQA. VPs give a GO.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Team responsible of the branch with support of team responsible of each project</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout feature/x
git rebase -i origin/develop
(remove initial commit)
git checkout develop
git pull
git merge --no-ff feature/x
git push</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-remove-a-feature-branch">Remove a Feature Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> Just after the merge of the feature branch to Develop</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> PL/TL</p>
</div>
<div class="paragraph">
<p><strong>How:</strong> Create SWF ticket on Jira to remove the full package (Branches+CI+Acceptance).</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-fix-branch">1.3.4. Fix Branch</h4>
<div class="paragraph">
<p>Fix Branch are dedicated branch to fix a bug. The validation process may be different if the bug has been raised by FQA/TQA or by SM.</p>
</div>
<div class="paragraph">
<p>A fix branch is always created from Develop branch (except exceptional circumstance: fix on stable only).</p>
</div>
<div id="git-workflow-fix-branch" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-workflow-fix-branch.png"><img src="images/git-workflow-fix-branch.png" alt="Git Workflow - Fix Branch" width="400"></a>
</div>
<div class="title">Figure 6. Git Workflow - Fix Branch</div>
</div>
<div class="sect4">
<h5 id="id-actions-2">1.3.4.1. Actions</h5>
<div class="sect5">
<h6 id="id-create-a-fix-branch">Create a Fix Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> A Jira issue has been created, time to resolve it is already estimated.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Team responsible to fix the issue.</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout develop
git pull
git checkout -b fix/issue
git push</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-merge-a-fix-branch-to-develop">Merge a Fix Branch to Develop</h6>
<div class="paragraph">
<p><strong>When:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>If issue raised by TQA/FQA: After Engineering test</p>
</li>
<li>
<p>If issue raised by SM: After SM test</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Who:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>If issue raised by TQA/FQA: Team responsible to fix the issue</p>
</li>
<li>
<p>If issue raised by SM: SM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout fix/issue
git pull
git rebase origin/develop
git checkout develop
git pull
git merge fix/issue --squash
git commit -a
git push</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-remove-a-fix-branch">Remove a Fix Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> After the merge of the fix branch to Develop</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Team responsible to fix the issue.</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git push origin --delete fix/issue
git branch -d fix/issue</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-stable-branch">1.3.5. Stable Branch</h4>
<div class="paragraph">
<p>Stable branch are used to perform releases and write / accept fix.</p>
</div>
<div id="git-workflow-stable-branch" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-workflow-stable-branch.png"><img src="images/git-workflow-stable-branch.png" alt="Git Workflow - Stable Branch" width="600"></a>
</div>
<div class="title">Figure 7. Git Workflow - Stable Branch</div>
</div>
<div class="sect4">
<h5 id="id-actions-3">1.3.5.1. Actions</h5>
<div class="sect5">
<h6 id="id-create-a-new-stable-branch">Create a new Stable Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> When create the first Release Candidate version</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> SWF</p>
</div>
<div class="paragraph">
<p><strong>How:</strong> With a script similar to [createFB.sh](<a href="https://github.com/exoplatform/swf-scripts/blob/master/createFB.sh" class="bare">github.com/exoplatform/swf-scripts/blob/master/createFB.sh</a>)</p>
</div>
</div>
<div class="sect5">
<h6 id="id-create-a-fix-branch-to-fix-stable-branch">Create a Fix Branch to fix Stable Branch</h6>
<div class="paragraph">
<p><strong>In exceptional circumstance</strong></p>
</div>
<div class="paragraph">
<p><strong>When:</strong> A fix need to be done on a specific version but not on the on development version (fix a performance issue for instance)</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Team responsible to fix the issue after a Go from SM.</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout stable/4.1.x
git pull
git checkout -b fix/4.1.x-issue</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-merge-a-fix-branch-to-stable">Merge a Fix Branch to Stable</h6>
<div class="paragraph">
<p><strong>In exceptional circumstance</strong></p>
</div>
<div class="paragraph">
<p><strong>When:</strong> After SM test</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> SM Team</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout fix/4.1.x-issue
git checkout stable/4.1.x
git pull
git merge fix/4.1.x-issue --squash
git commit -a
git push</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-remove-a-fix-branch-2">Remove a Fix Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> After the merge of the fix branch to stable branch</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> SM</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git push origin --delete fix/4.1.x-issue
git branch -d fix/4.1.x-issue</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-perform-a-release">Perform a release</h6>
<div class="paragraph">
<p><strong>When:</strong> After FQA/TQA test campaign. VPs give a GO.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Release managers</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git clone git@github.com:exoplatform/xxx.git
cd xxx
# You checkout the release branch on which you need to perform a release.
git checkout stable/A.B.x
# You follow the classical maven release process
mvn release:prepare
mvn release:perform</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-move-a-release-tag">Move a release tag</h6>
<div class="paragraph">
<p><strong>In really special case</strong> (when the test campaign show a critical issue after tagging but before nexus publishing) release manager still can apply a last minute commit and move the tag.</p>
</div>
<div class="paragraph">
<p><strong>When:</strong> After FQA/TQA test campaign. VPs give a GO.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> Release managers</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># After your commit, just delete the remote tag, and create another one in this way
git tag -d 1.0.0
git push origin :refs/tags/1.0.0
git tag 1.0.0
git push origin 1.0.0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-integration-branch">1.3.6. Integration Branch</h4>
<div class="paragraph">
<p>Integration branches are dedicated branch to automatic integration task (like Crowdin translation for instance).</p>
</div>
<div class="sect4">
<h5 id="id-actions-4">1.3.6.1. Actions</h5>
<div class="sect5">
<h6 id="id-create-a-new-integration-branch">Create a new Integration Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> Whenever an integration is needed with a third-party system.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> SWF</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout develop
git pull
git checkout -b integration/my-integration
git push</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-poc-branch">1.3.7. PoC Branch</h4>
<div class="paragraph">
<p><code>Engineering</code></p>
</div>
<div class="paragraph">
<p>Poc branches are dedicated branch to develop a Prove of Concept (PoC).</p>
</div>
<div id="git-workflow-poc-branch" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/git-workflow-poc-branch.png"><img src="images/git-workflow-poc-branch.png" alt="Git Workflow - POC Branch" width="300"></a>
</div>
<div class="title">Figure 8. Git Workflow - POC Branch</div>
</div>
<div class="sect4">
<h5 id="id-actions-5">1.3.7.1. Actions</h5>
<div class="sect5">
<h6 id="id-create-a-new-poc-branch">Create a new PoC Branch</h6>
<div class="paragraph">
<p><strong>When:</strong> A new PoC is planified.</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> PL/TL</p>
</div>
<div class="paragraph">
<p><strong>How:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ git checkout develop
$ git pull
$ git checkout -b poc/x
[Modify all pom: initial commit]
$ git add pom.xml
$ git commit -m "details"
$ git push</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-release-process">1.3.8. Release Process</h4>
<div class="paragraph">
<p>A release must never involve a freeze of the develop branch.
This section explain the release process to follow when doing an intermediate release (Milestone, Release Candidate) or the final release.</p>
</div>
<div class="sect4">
<h5 id="id-intermediate-release">1.3.8.1. Intermediate Release</h5>
<div class="paragraph">
<p><strong>When:</strong> Product Leader give a go to do an intermediate release of PLF (Milestone, Release Candidate)</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> PLF Team with support of team responsible of each project</p>
</div>
<div id="release-intermediate" class="imageblock" style="text-align: center">
<div class="content">
<a class="image" href="images/release-prepare-intermediate.png"><img src="images/release-prepare-intermediate.png" alt="Intermediate Release" width="600"></a>
</div>
<div class="title">Figure 9. Intermediate Release</div>
</div>
</div>
<div class="sect4">
<h5 id="id-final-release">1.3.8.2. Final Release</h5>
<div class="paragraph">
<p><strong>When:</strong> Product Leader give a go to do the final release of PLF</p>
</div>
<div class="paragraph">
<p><strong>Who:</strong> PLF Team with support of team responsible of each project</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/release-prepare-final.png" alt="Final Release process" width="500" height=")">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-improvement">1.3.9. Improvement</h4>
<div class="sect4">
<h5 id="id-what-is-changing-compare-to-4-1">1.3.9.1. What is changing compare to 4.1</h5>
<div class="ulist">
<ul>
<li>
<p>Clean history by using git rebase.</p>
</li>
<li>
<p>No more weekly merge between develop and master.</p>
</li>
<li>
<p>All fixes are push firstly to develop branch. Then SM backport what they need to stable.</p>
</li>
<li>
<p>Rebase develop to feature branch:</p>
<div class="ulist">
<ul>
<li>
<p>To do it regularly</p>
</li>
<li>
<p>To do it ONLY if develop branch is ok : build + acceptance are ok otherwise you&#8217;ll distribute shitty code everywhere</p>
</li>
<li>
<p>To do it for all projects in a given FB at the same time (to keep the coherency)</p>
</li>
</ul>
</div>
</li>
<li>
<p>No more master branch on exodev repository. Master is only on blessed repository.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-git-cheat-sheet">1.4. Git - Cheat Sheet</h3>
<div class="imageblock">
<div class="content">
<img src="images/git-overview.png" alt="Git Big Picture" width=")">
</div>
</div>
<div class="sect3">
<h4 id="id-features">1.4.1. Features</h4>
<div class="sect4">
<h5 id="id-create">1.4.1.1. Create</h5>
<div class="paragraph">
<p><strong>From existing data</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">cd  &lt;DIRECTORY&gt;
git init
git add .
git commit</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>From existing repo</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git clone &lt;EXISTING_REPO&gt; &lt;NEW_REPO&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>default protocol is ssh
EXISTING_REPO is a local path or a remote URL, for examples :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>path</em> : ~/repository.git</p>
</li>
<li>
<p><em>ssh</em> : git@host:repository.git</p>
</li>
<li>
<p><em>http(s)</em> : <a href="https://username@host/repository.git" class="bare">username@host/repository.git</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="id-update">1.4.1.2. Update</h5>
<div class="paragraph">
<p><strong>Fetch latest changes from origin</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git fetch</code></pre>
</div>
</div>
<div class="paragraph">
<p>this does not merge them</p>
</div>
<div class="paragraph">
<p><strong>Pull latest changes from origin</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git pull</code></pre>
</div>
</div>
<div class="paragraph">
<p>does a fetch followed by a merge</p>
</div>
<div class="paragraph">
<p>In case of conflict, resolve the conflict and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git am —resolve</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-track-files">1.4.1.3. Track Files</h5>
<div class="paragraph">
<p><strong>Start tracking files</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git add &lt;FILES&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Interactive selection of files to track</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git add -i</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Move/Rename a file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git mv &lt;OLD_NAME&gt; &lt;NEW_NAME&gt;
git mv &lt;OLD_PATH&gt; &lt;NEW_PATH&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Stop tracking and delete files in working directories</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git rm &lt;FILES&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Stop tracking but keep files in working directory</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git rm —cached &lt;FILES&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="commit">1.4.1.4. Commit</h5>
<div class="paragraph">
<p><strong>Commit all local changes</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git commit -a +</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Commit messages</strong></p>
</div>
<div class="paragraph">
<p>Commits must relate to a JIRA issue.
Convention for messages inspired by <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">this article</a> :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first line must be short (50 chars or less) and auto-descriptive
in a format " ", for example <code>AM-101 : Fix the behavior of archives download</code></p>
</li>
<li>
<p>Write your commit message in the present tense: <code>Fix bug</code> and not <code>Fixed bug</code>.</p>
</li>
<li>
<p>The second line is blank.</p>
</li>
<li>
<p>Next lines optionally define a short summary of changes (wrap them to about 72 chars or so).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">AM-101 : Fix the behavior of archives download

* —no-cache has no effect on it
* The add-ons manager always retry to download the archive from the
downloadUrl. The download is skipped if the local file exists, it has
the same size as the remote one and its modifiedDate is &gt; to the remote
one (It will allow to install new SNAPSHOTs without enforcing to
download the archive each time)
* The same behavior is applied for all URLs (http(s), file) +</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-publish">1.4.1.5. Publish</h5>
<div class="paragraph">
<p><strong>Prepare a patch for other developers</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git format-patch origin</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Push changes to origin</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git push origin &lt;BRANCH&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use option <code>--all</code> to push all local references (branches, tags..), <code>--tags</code> to push all tags,
<code>--force</code> to push non fast-forward changes (must be avoided to not risk to loose commits)</p>
</div>
<div class="paragraph">
<p><strong>Make a version or milestone</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git tag &lt;TAG_NAME&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-branch">1.4.1.6. Branch</h5>
<div class="paragraph">
<p><strong>List all branches</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git branch</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Switch to the BRANCH branch</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout &lt;BRANCH&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Merge branch B1 into branch B2</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout &lt;B2&gt;
git merge &lt;B1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Create branch based on HEAD</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git branch &lt;BRANCH&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Create branch based on another</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git branch &lt;NEW&gt; &lt;BASE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Delete a local branch</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git branch -d &lt;BRANCH&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Delete a remote branch</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git push &lt;origin&gt; :&lt;BRANCH&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-remote">1.4.1.7. Remote</h5>
<div class="paragraph">
<p><strong>List all your remote repositories</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ git remote -v
origin git@github.com:exodev/platform (fetch)
origin git@github.com:exodev/platform (push)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Add a new remote repository</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git remote add upstream git@github.com:exoplatform/platform.git</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Rename a remote repository</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git remote rename upstream foo</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Delete a remote repository</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git remote rm upstream foo</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-browse">1.4.1.8. Browse</h5>
<div class="paragraph">
<p><strong>Files changed in working directory</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git status</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Changes to tracked files</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git diff</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Changes between ID1 and ID2</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git diff &lt;ID1&gt; &lt;ID2&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>History of changes</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git log</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Who changed what and when in a file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git blame &lt;FILE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>A commit identified by ID</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git show &lt;ID&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>A specific file from a specific ID</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git diff &lt;ID&gt;:&lt;FILE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Search for patterns</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git grep &lt;PATTERN&gt; &lt;PATH&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-revert">1.4.1.9. Revert</h5>
<div class="paragraph">
<p><strong>Return to the last committed state</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout -f | git reset —hard</code></pre>
</div>
</div>
<div class="paragraph">
<p>you cannot undo a hard reset</p>
</div>
<div class="paragraph">
<p><strong>Revert the last commit</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git revert HEAD</code></pre>
</div>
</div>
<div class="paragraph">
<p>Creates a new commit</p>
</div>
<div class="paragraph">
<p><strong>Revert specific commit</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git revert &lt;ID&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Creates a new commit</p>
</div>
<div class="paragraph">
<p><strong>Fix the last commit</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git commit -a —amend</code></pre>
</div>
</div>
<div class="paragraph">
<p>after editing the broken files</p>
</div>
<div class="paragraph">
<p><strong>Checkout the ID version of a file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git checkout &lt;ID&gt; &lt;FILE&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Restoring lost commits</strong></p>
</div>
<div class="paragraph">
<p>So, you just did a <code>git reset --hard HEAD^</code> and threw out your last
commit. Well, it turns out you really did need those changes. You’ll
never be able to implement that algorithm that perfectly twice, so you
need it back. Don’t fear, git should still have your commit. When you do
a reset, the commit you threw out goes to a <code>dangling</code> state. It’s
still in git’s datastore, waiting for the next garbage collection to
clean it up. So unless you’ve ran a <code>git gc</code> since you tossed it, you
should be in the clear to restore it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git cherry-pick ORIG_HEAD</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>HEAD vs ORIG_HEAD</strong></p>
</div>
<div class="paragraph">
<p><code>ORIG_HEAD</code> is previous state of <code>HEAD</code>, set by commands that have
possibly dangerous behavior, to be easy to revert them. It is less
useful now that Git has reflog: <code>HEAD&#64;{1}</code> is roughly equivalent to
<code>ORIG_HEAD</code> (<code>HEAD&#64;{1}</code> is always last value of <code>HEAD</code>, <code>ORIG_HEAD</code>
is last value of <code>HEAD</code> before dangerous operation).</p>
</div>
<div class="paragraph">
<p><strong>Removing a File from Every Commit (Powerful filter-branch)</strong></p>
</div>
<div class="paragraph">
<p>This occurs fairly commonly. Someone accidentally commits a huge binary
file with a thoughtless <code>git add .</code>, and you want to remove it
everywhere. Perhaps you accidentally committed a file that contained a
password, and you want to make your project open source. filter-branch
is the tool you probably want to use to scrub your entire history. To
remove a file named passwords.txt from your entire history, you can use
the <code>--tree-filter</code> option to <code>filter-branch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git filter-branch —tree-filter 'rm -f passwords.txt' HEAD</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--tree-filter</code> option runs the specified command after each
checkout of the project and then recommits the results. In this case,
you remove a file called passwords.txt from every snapshot, whether it
exists or not. If you want to remove all accidentally committed editor
backup files, you can run something like
<code>git filter-branch --tree-filter 'rm -f *~' HEAD</code>.
Using <code>--index-filter</code> with <code>git rm</code> yields a significantly faster
version. Like with using <code>rm filename</code>, <code>git rm --cached filename</code> will
fail if the file is absent from the tree of a commit. If you want to
<code>completely forget</code> a file, it does not matter when it entered
history, so we also add <code>--ignore-unmatch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git filter-branch —index-filter 'git rm —cached —ignore-unmatch passwords.txt' HEAD</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-sources">1.4.2. Sources</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/AlexZeitler/gitcheatsheet">Alex Zeitler Git cheat sheet</a></p>
</li>
<li>
<p><a href="http://jan-krueger.net/git">Jan Krueger Git cheat sheet</a></p>
</li>
<li>
<p><a href="http://gitready.com/">Git Ready</a></p>
</li>
<li>
<p><a href="http://stackoverflow.com/questions/964876/head-and-orig-head-in-git">Stackoverflow - HEAD and ORIG_HEAD in Git</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-contributions">1.5. Contributions</h3>
<div class="sect3">
<h4 id="id-workflow">1.5.1. Workflow</h4>
<div class="paragraph">
<p>The contribution workflow mainly relies on Github Pull Requests. Here are the rules :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PR for everything</code><br>
For every fix/feature, for all platform projects and supported addons, create a PR.
Creating a PR is easy and allows to share, discuss on validate more easily the fix/feature.
To create a PR :</p>
<div class="ulist">
<ul>
<li>
<p>create a branch locally with your fix and push it to Github</p>
</li>
<li>
<p>in Github, select your branch, and click on <strong>New pull request</strong> <span class="image"><img src="images/git-pr-create-01.png" alt="Git PR Create" width="700"></span></p>
</li>
<li>
<p>select the right base branch (most of the time <strong>develop</strong>) and check that the PR contains only your commits <span class="image"><img src="images/git-pr-create-02.png" alt="Git PR Create" width="700"></span></p>
</li>
<li>
<p>fill the description</p>
</li>
<li>
<p>click on <strong>Create pull request</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>PR on develop</code><br>

PR must always be done on `exodev:develop` or `exo-addons:develop`, not on `exoplatform:develop` (we fix on develop first, then we backport to stable if needed).
Remember that exoplatform:develop is read-only.
There are only 2 exceptions :
</p>
<div class="ulist">
<ul>
<li>
<p>the fix is different between develop dans stable - in such a case, 2 PRs are necessary, one on develop, one on stable</p>
</li>
<li>
<p>the bug only occurs on stable - in such a case, PR must be done on stable</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Explain your PR</code></p>
<div class="paragraph">
<p>The description of the PR must always be filled to describe precisely what was the root cause of the problem and how it has been solved.</p>
</div>
</li>
<li>
<p><code>Update the PR, do not recreate it</code></p>
<div class="paragraph">
<p>To update a PR, just push a new commit in the same branch, no need to create a new branch and a new PR.
Creating a new PR for each update prevents from following easily the discussion and the updates history.</p>
</div>
</li>
<li>
<p><code>PR must be validated by peers</code></p>
<div class="paragraph">
<p>When a PR is submitted, it has to be reviewed by at least one peer.
When the PR is validated by the peer, the PR can be merged in the target branch.</p>
</div>
</li>
<li>
<p><code>Merge the PR correctly</code></p>
<div class="paragraph">
<p>Before merging the PR in the target branch, make sure the branch of the PR is up to date (push --force), otherwise the PR will not appear as <strong>Merged</strong> in Github.</p>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/git-pr-merged.png" alt="Git PR Merged" width="700">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Clean your mess</code></p>
<div class="paragraph">
<p>Once the PR has been merged, delete the branch in Github, and close the PR if it is not already marked as <strong>Merged</strong> or <strong>Closed</strong>.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>Code Review does NOT mean Test, Reviewers are NOT Testers</code><br>
The role of the reviewers is to review the code changes (code best practices, better/easier solution, &#8230;&#8203;).
They do not necessarily have to test (they can if they want/need of course).
The author of the PR must not rely on the reviewers to test it, he/she is responsible for that (and the QA people will help during their test campaigns).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="id-community-contributions">1.5.2. Community Contributions</h4>
<div class="paragraph">
<p>Anyone with a Github account can contribute to eXo Platform.
The only difference for people outside of the eXo Platform organization is they must sign a <a href="../resources/sources/eXo_Platform_ContributorAgreement_EN_v1.2.pdf">Contribution License Agreement</a>.
The Contributor License Agreement is needed to clarify the terms of usage of contributions by eXo Platform and the entire open source community.</p>
</div>
<div class="paragraph">
<p>The CLA must be printed, signed, then scanned as a PDF file and sent at <a href="mailto:cla@exoplatform.com">cla@exoplatform.com</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-commits-messages-best-practices">1.5.3. Commits messages best practices</h4>
<div class="paragraph">
<p>It is often important to browse the source code history to understand when and why a change has been done.
Good commits message are therefore crucial to help developers in maintaining a code base.
In order to improve the quality of the commit messages, the following rules must be respected:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>instead of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git commit -m “My commit message”</code></pre>
</div>
</div>
<div class="paragraph">
<p>when committing a change, in order to write a more detailed commit message and use the commit template</p>
</div>
</li>
<li>
<p>the commit message must start with a line containing a short subject (max 100 characters) which starts by the Jira issue number and then describes briefly what the commit does.
For example : PLF-7916 : Make Setting Service cache ayncInvalidation</p>
</li>
<li>
<p>the commit subject must not be a copy/paste of the Jira issue summary.
As said previously, it must describe what the commit does, as if the sentence would start with “If applied, this commit will &#8230;&#8203;”.</p>
</li>
<li>
<p>after the subject, one blank line must be added before starting the body</p>
</li>
<li>
<p>the body describes in details what the commit does and must answer 2 questions : why is this change needed and how does this change address the issue. It should give as much information as possible to make it easy for another developer who does not know deeply the context to understand the commit. Therefore the body is never too long.</p>
</li>
<li>
<p>after the body, a list of links to relevant resources can be added (optional). It must be separated from the body by one blank line.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example of commit message following these rules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">PLF-8070 : remove useless configuration about settings and notifications services

At first access after startup, if the eXo instance has never been registered, the servlet /registration/software-register is called, then the servlet /registration/software-register-action when clicking on a button.
The servlet /registration/software-register-action needs to read and update a setting, so it needs the service org.exoplatform.commons.api.settings.SettingService.
The JPA implementation of this service needs the EntityManagerService to fetch data, which is available only in the PortalContainer.
And the available container when accessing the servlet is actually the RootContainer.
In PLF 5.0.0-M10 (in which the bug does not occur), the SettingService implementation used is the cached impl (org.exoplatform.settings.cache.CacheSettingServiceImpl), and when we call the get method to read a settings, it calls the method org.exoplatform.commons.api.settings.data.SettingContext#getCurrentRepositoryName which creates the PortalContainer instance by calling PortalContainer.getInstance().
Therefore, luckily, when the EntityManagerService is retrieved from the container, the current container is the PortalContainer and it is available and everything works fine.

From SOC-5917, a configuration has been added in social project which changes the implementation of the SettingService from the cached one to org.exoplatform.settings.jpa.JPAUserSettingServiceImpl :  25c143c#diff-a874bcc27e08363c8bcf7f9ce8eab5a7R346
And this implementation never calls PortalContainer.getInstance(), which means the container available in the servlet is the RootContainer which does not contain EntityManagerService, which makes the setting read fails.

This fix removes the configuration added in SOC-5917 about settings, so the cached impl will be used again.
Also, a fix in the servlet is done (in the platform project) to ensure that the PortalContainer is created when fetching the setting, no matter what the implementation of SettingService.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, all commit messages do not need to be that long, but it must contain all relevant information to understand what and why the changes have been done.</p>
</div>
<div class="paragraph">
<p>In order to help developers, a template is available.</p>
</div>
<div class="paragraph">
<p><strong>Template</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># &lt;jira-issue-id&gt;: (If applied, this commit will...) &lt;subject&gt;
# |&lt;----  Using a Maximum Of 100 Characters  ----&gt;|

# Why is this change needed?
# Prior to this change, ...
# How does it address the issue?
# This change ...
# |&lt;----   Try To Limit Each Line to a Maximum Of 72 Characters   ----&gt;|

# Provide links or keys to any relevant tickets, articles or other resources

# --------------------
# Remember to
#    Capitalize the subject line
#    Use the imperative mood in the subject line
#    Do not end the subject line with a period
#    Separate subject from body with a blank line
#    Use the body to explain what and why vs. how
#    Can use multiple lines with "-" for bullet points in body
# --------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>How to apply it</strong></p>
</div>
<div class="paragraph">
<p>The template can be applied globally with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global commit.template &lt;.git-commit-template.txt file path&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, if you saved it to your home folder, try:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config --global commit.template ~/.git-commit-template.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also apply it on a particular project by running it at the root of the project, and without the <code>--global</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">git config commit.template &lt;.git-commit-template.txt file path&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-pull-requests-best-practices">1.5.4. Pull Requests best practices</h4>
<div class="paragraph">
<p>As well as good commits messages are important for code base maintainers, good PRs descriptions are important for reviewers.
It helps to understand what the developer has done and why.
The PR title must start with the Jira issue, then describe briefly what the PR does.
For example : <em>PLF-7916 : Make Setting Service cache ayncInvalidation</em></p>
</div>
<div class="paragraph">
<p>The PR description must at least provide the information given in the commit message body : why is this change needed and how does this change address the issue (Tip: using the first line of the commit message as the PR title and the commit message body as the PR description is a good start for the PR description).</p>
</div>
<div class="paragraph">
<p>It can also give the following information when relevant:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alternative solutions tried and why they failed</p>
</li>
<li>
<p>Any question, remark or doubt that the developer has</p>
</li>
<li>
<p>Tested environments (tomcat/jboss, databases, ldap, browsers, addons, …)</p>
</li>
<li>
<p>Links to resources which can help to understand the contribution</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The PR does not need to describe the issue (functional impacts, reproduction steps, &#8230;&#8203;) since it is already done in the related Jira issue.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-contributions-reviews">1.5.5. Contributions reviews</h4>
<div class="sect4">
<h5 id="id-how-to-ask-for-reviewers">1.5.5.1. How to ask for reviewers ?</h5>
<div class="paragraph">
<p>After having submitted a PR, the developer must change the status of the related Jira issue to “PR Review” by clicking on the button “review needed”.
The link to the PR must be set in the field “Git Pull Request”.</p>
</div>
<div class="paragraph">
<p>If the fix is composed of several PRs, all the PR links must be set in the field “Git Pull Request”, separated by semicolons.
If the list of PRs is too long, it can exceed the max length of this field.
In such a case, list all the PRs links in a comment of the Jira issue, and set the permalink of this comment in the field “Git Pull Request”.</p>
</div>
<div class="paragraph">
<p>Once the jira is set as “PR Review”, others developers are supposed to review it in a reasonable delay.
If the developer wants to ask a specific person or some specific persons to do the review, the field “Reviewers” of the Github PR can be used:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/git-pr-ask-reviewers.png" alt="Git PR Ask Reviewers" width="700"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="id-how-to-do-a-review">1.5.5.2. How to do a review ?</h5>
<div class="paragraph">
<p>The reviewers must use the review feature of Github to do the review. On the first comment, the button “Start review” must be used. Then, once the review is done, the developer must submit the review by clicking on the button “Review changes”, then select the right option:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Comment</code>: the review contains only remarks or questions which ask for clarifications but do not necessarily ask for changes</p>
</li>
<li>
<p><code>Approve</code>: the PR is approved</p>
</li>
<li>
<p><code>Request changes</code>: the review contains at least a comment asking for a change in the PR</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the option <code>Approve</code> is selected, the PR is validated, and the Jira issue status must be changed to <code>Merge</code>.
If the option <code>Comment</code> or <code>Request changes</code> is selected, the PR is not validated, and the Jira issue status must be changed to <code>PR Refused</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="id-what-should-i-care-when-reviewing-a-pull-request">1.5.5.3. What should I care when reviewing a Pull Request ?</h5>
<div class="paragraph">
<p>When reviewing a Pull Request, the following things must be checked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Correctness of the fix/feature</p>
</li>
<li>
<p>Learning</p>
</li>
<li>
<p>Coding best practices</p>
</li>
<li>
<p>Unit Tests</p>
</li>
<li>
<p>Security</p>
</li>
<li>
<p>Performance</p>
</li>
<li>
<p>Maintainability</p>
</li>
<li>
<p>Troubleshooting</p>
</li>
<li>
<p>Upgrades</p>
</li>
<li>
<p>API breaking</p>
</li>
<li>
<p>Code formatting (if not yet automated)</p>
</li>
<li>
<p>Documentation</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This list does not only apply to reviewers, but also to contributors!
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="id-correctness-of-the-fixfeature">Correctness of the fix/feature</h6>
<div class="paragraph">
<p>Most of the time of the review must be spent to understand the ultimate goals of the code changes, which means going back to the issue and understanding how it is fixed. The reviewer must check if the PR fixes the issue, as well as if it handles correctly corner cases and if it does not add regressions or unexpected impacts on related features.</p>
</div>
<div class="paragraph">
<p>Also, even if the PR review is not QA, if there is any doubt on the correctness of the fix/feature, it should be tested.</p>
</div>
<div class="paragraph">
<p>Correctment does not only mean that the PR fixes the issue, but also that it is the most adequate and simple solution. The reviewer should not hesitate to propose any others solutions or questions to exchange with the committer and make sure it is the right solution to apply.</p>
</div>
</div>
<div class="sect5">
<h6 id="id-learning">Learning</h6>
<div class="paragraph">
<p>The review is not only a process to validate others people code, it is also an ideal moment to learn from them. Reviewers are encouraged to ask any question if there is something they do not understand or want more details on.</p>
</div>
</div>
<div class="sect5">
<h6 id="id-coding-best-practices">Coding best practices</h6>
<div class="paragraph">
<p>The reviewer must check the PR follows the best practices described in the eXo Coding Best Practices (WIP).
Beyond this document, the reviewer must check the PR follows the best practices generally admitted in software development.
If a practice is not described in the eXo Coding Best Practices document and is used in the PR, it is a good opportunity to discuss about it and add it if necessary in the document.</p>
</div>
</div>
<div class="sect5">
<h6 id="id-unit-tests">Unit Tests</h6>
<div class="paragraph">
<p>Unit Tests are essential to minimize regressions. The reviewer must check that unit tests are implemented to cover the related bug or the feature, especially:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Are the test titles adequately descriptive?</p>
</li>
<li>
<p>Are the key scenarios captured?</p>
</li>
<li>
<p>Are there enough edge cases covered for comfort?</p>
</li>
<li>
<p>Are the tests written with good assertions?</p>
</li>
<li>
<p>If a test fails, would it be easy to track down the error?</p>
</li>
<li>
<p>Are the tests independent from each others (especially if they manage data)?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reviewer must also ensure that the unit tests coverage minimum ratio defined in Maven configuration (<code>exo.test.coverage.ratio</code>) is not decreased and advise to increase it if the test coverage has been improved.</p>
</div>
</div>
<div class="sect5">
<h6 id="id-security">Security</h6>
<div class="paragraph">
<p>The reviewer must check that the contribution does not introduce security issues, especially in the following areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data/Input Validation of data from all untrusted sources</p>
<div class="paragraph">
<p><em>All input data must be validated before being used and/or stored in the system (UI forms, REST APIs inputs, …).</em></p>
</div>
</li>
<li>
<p>Authentication</p>
</li>
<li>
<p>Session Management</p>
</li>
<li>
<p>Authorization</p>
<div class="paragraph">
<p><em>All the resources of the system (web pages, documents, REST APIs, …) must only be accessible by the authorized population.</em></p>
</div>
</li>
<li>
<p>Cryptography (Data at rest and in transit)</p>
<div class="paragraph">
<p><em>Sensitive information must not be transmitted or persisted in clear text. Also, secure method must be used for cryptography (for example do not use MD5 to encode users’ passwords).</em></p>
</div>
</li>
<li>
<p>Error Handling / Information Leakage</p>
<div class="paragraph">
<p><em>Sensitive information should not end up in error messages (logs, UI, …). For example do not include passwords or security tokens in logs.</em></p>
</div>
</li>
<li>
<p>Logging / Auditing</p>
<div class="paragraph">
<p><em>Some operations require logging/auditing to allow to understand what happened during a security breach or detect security issues as they happen.</em></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="id-performance">Performance</h6>
<div class="paragraph">
<p>The reviewer must try to detect if the fix/feature could have significant bad impacts on the performances of the application. Performances issues can be expensive to find and fix, so it is important to raise any concern on this topic at this stage. Here are some examples of performance issues causes: too many database requests, slow database query, missing index in the database, too many HTTP requests, &#8230;&#8203;</p>
</div>
</div>
<div class="sect5">
<h6 id="id-maintainability">Maintainability</h6>
<div class="paragraph">
<p>The maintainability measure how easy it is to make changes in a code base (fixing bugs, adding new features, replacing a faulty or obsolete component, &#8230;&#8203;). This means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tests are implemented to ensure a good test coverage and help understand how code should behave</p>
</li>
<li>
<p>Classes and methods have a clear and single responsibility</p>
</li>
<li>
<p>Classes, methods and variables names are self-descriptive and/or well documented</p>
</li>
<li>
<p>Classes and methods are short</p>
</li>
<li>
<p>Cyclomatic complexity of a method should be low</p>
</li>
<li>
<p>Components are loosely coupled</p>
</li>
<li>
<p>Code duplication should be avoided</p>
</li>
<li>
<p>Code must respect formatting rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More generally, if it was hard for the reviewer to understand, the code should probably be reworked to make it easy to understand since it means it will be hard to understand for next developers in the future.</p>
</div>
</div>
<div class="sect5">
<h6 id="id-troubleshooting">Troubleshooting</h6>
<div class="paragraph">
<p>When problems occur in production, it is generally not possible to debug or to update easily the code to find the cause. Therefore, the developer must try to anticipate the potential issues and provide the information and/or tools to help finding the error cause and fixing it. The reviewer must evaluate if the contribution contains the right elements to help this troubleshooting. Here are some examples of question to answer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is there enough logs ?</p>
</li>
<li>
<p>Do the logs have the appropriate level ?</p>
</li>
<li>
<p>If relevant, in case of problem, is there any tool (JMX bean, …) to gather more information or to recover ?</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="id-upgrades">Upgrades</h6>
<div class="paragraph">
<p>Any contribution must be considered to be installed on an existing environment. In such a case it must be ensured that the upgrade is done as transparently as possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If data are impacted, an upgrade plugin must be developed</p>
</li>
<li>
<p>If any configuration change is required, the documentation and the upgrade notes must be updated</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="id-api-breaking">API breaking</h6>
<div class="paragraph">
<p>API must be stable and can be broken only in major releases. Contributions targeted to minor or maintenance versions must not break the public API. Public API includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java API</p>
</li>
<li>
<p>REST API</p>
</li>
<li>
<p>Javascript API</p>
</li>
<li>
<p>Configuration</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="id-documentation">Documentation</h6>
<div class="paragraph">
<p>A documentation Jira issue must be opened as soon as the fix or the new feature has an impact on the documentation. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New feature to be described</p>
</li>
<li>
<p>Update of the behavior of an existing feature</p>
</li>
<li>
<p>API change</p>
</li>
<li>
<p>Configuration change</p>
</li>
<li>
<p>…</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The documentation issue must be as detailed as possible (especially for technical documentation items) to ease the work of the documentation writer.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="id-how-to-know-if-someone-is-not-already-reviewing-a-pr">1.5.5.4. How to know if someone is not already reviewing a PR ?</h5>
<div class="paragraph">
<p>You cannot (except by talking to your colleagues of course ;)), there is no status for such a thing in Github and Jira, and we don’t need it.
It is not a problem if several persons review the same PR. It means more feedbacks, more learning, … therefore it is all positive.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-tips-for">1.5.6. Tips for …</h4>
<div class="sect4">
<h5 id="id-contributors">1.5.6.1. &#8230;&#8203; contributors</h5>
<div class="ulist">
<ul>
<li>
<p>Provide descriptive PR title and description</p>
<div class="paragraph">
<p><em>Once again, the more explanation the contributor gives about a PR, the easiest it will be for the reviewer to understand and therefore to review. This will save a lot of time for all people.</em></p>
</div>
</li>
<li>
<p>Make small PRs</p>
<div class="paragraph">
<p><em>Beyond a certain amount of lines of code, the review becomes very difficult to be done efficiently.</em></p>
</div>
</li>
<li>
<p>Don’t get it personally</p>
<div class="paragraph">
<p><em>People can feel personally offended by others people’s comments. It is important to understand that the comments and criticisms are related to the code, not to the person.</em></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="id-reviewers">1.5.6.2. &#8230;&#8203; reviewers</h5>
<div class="ulist">
<ul>
<li>
<p>Understand and agree to the <a href="http://retrospectivewiki.org/index.php?title=The_Prime_Directive">Prime Directive</a></p>
<div class="paragraph">
<p><em>The Prime Directive states that “Regardless of what we discover, we understand and truly believe that everyone did the best job they could, given what they knew at the time, their skills and abilities, the resources available, and the situation at hand.”</em></p>
</div>
</li>
<li>
<p>Use the right tone</p>
<div class="paragraph">
<p><em>Kindness is a keyword when doing reviews, but it is not always sufficient. The written language is a difficult art since it is not always easy to see the tone and the intuition behind the words, so it must be done carefully. Here are some examples:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Instead of “This is the wrong way to structure the test. There are too many cases in this test.”, prefer “I think it would help with readability to split this test into multiple tests.”</em></p>
</li>
<li>
<p><em>Instead of “These 3 lines really belong in a separate method.”, prefer “What do you think about extracting these lines into another method to isolate the calculation logic?”</em></p>
</li>
<li>
<p><em>Avoid words like “just” which assumes the contributors missed something obvious.</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>It’s OK to say “It’s all good”</p>
<div class="paragraph">
<p><em>The reviewer does not have to find an issue in every review.</em></p>
</div>
</li>
<li>
<p>Take your time</p>
<div class="paragraph">
<p><em>It is important to understand what the contributor did and why before validating a contribution, so the reviewer must take his/her time to do the review.</em></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="id-contributors-and-reviewers">1.5.6.3. &#8230;&#8203; contributors and reviewers</h5>
<div class="ulist">
<ul>
<li>
<p>Adopt a positive attitude</p>
<div class="paragraph">
<p><em>A review is not a fight to know who is right and who is wrong, it is a collaboration process to provide the best contribution for the given issue. It is important that both contributors and reviewers adopt of a positive attitude with constructive criticisms to achieve this goal.</em></p>
</div>
</li>
<li>
<p>Switch to live review whenever it is necessary</p>
<div class="paragraph">
<p><em>When the review takes too much time or when the reviewer and/or the contributor feel the need to switch to a live review, it should be done. It is sometimes more efficient to discuss some minutes. The important point is to write the conclusion of the discussion in the PR comments to let everybody know it.</em></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="id-ide-settings-to-work-on-exo-platform-projects">2. IDE Settings to work on eXo Platform projects</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="id-eclipse-settings">2.1. Eclipse - Settings</h3>
<div class="paragraph">
<p>Eclipse settings are available in <a href="https://github.com/exoplatform/developer.exoplatform.org/tree/master/resources/ide/eclipse/">/resources/ide/eclipse</a>.</p>
</div>
<div class="paragraph">
<p>Configure Eclipse at "Window" &#8594; "Preferences…"</p>
</div>
<div class="sect3">
<h4 id="id-clean-up-settings">2.1.1. Clean Up Settings:</h4>
<div class="paragraph">
<p>Java &#8594; Code Style &#8594; Clean Up</p>
</div>
<div class="paragraph">
<p>Choose: "Import…" <a href="../resources/ide/eclipse/exo-Java-CodeStyle-CleanUp.xml">exo-Java-CodeStyle-CleanUp.xml</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eclipse-Java-CodeStyle-CleanUp.png" alt="Eclipse Clean Up Settings" width=")">
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-code-templates-settings">2.1.2. Code Templates Settings:</h4>
<div class="paragraph">
<p>Java &#8594; Code Style &#8594; Code Templates</p>
</div>
<div class="paragraph">
<p>Choose: "Import…" <a href="../resources/ide/eclipse/exo-Java-CodeStyle-CodeTemplates.xml">exo-Java-CodeStyle-CodeTemplates.xml</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eclipse-Java-CodeStyle-CodeTemplates.png" alt="Eclipse Code Style Settings" width=")">
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-formatter-settings">2.1.3. Formatter Settings:</h4>
<div class="paragraph">
<p>Java &#8594; Code Style &#8594; Formatter</p>
</div>
<div class="paragraph">
<p>Choose: "Import…" <a href="../resources/ide/eclipse/exo-Java-CodeStyle-Formatter.xml">exo-Java-CodeStyle-Formatter.xml</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eclipse-Java-CodeStyle-Formatter.png" alt="Eclipse Formatter Cleanup" width=")">
</div>
</div>
</div>
<div class="sect3">
<h4 id="id-organize-imports-settings">2.1.4. Organize Imports Settings:</h4>
<div class="paragraph">
<p>Java &#8594; Code Style &#8594; Organize Imports</p>
</div>
<div class="paragraph">
<p>Choose: "Import…" <a href="../resources/ide/eclipse/exo-Java-CodeStyle-OrganizeImports.importorder">exo-Java-CodeStyle-OrganizeImports.importorder</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/eclipse-Java-CodeStyle-OrganizeImports.png" alt="Eclipse Organize Imports Settings" width=")">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-intellij-settings">2.2. IntelliJ - Settings</h3>
<div class="paragraph">
<p>Intellij IDEA users must install the plugin <a href="http://plugins.jetbrains.com/plugin/?id=6546">Eclipse Code Formatter</a> and import Eclipse settings files from <a href="https://github.com/exoplatform/developer.exoplatform.org/tree/master/resources/ide/eclipse/">/resources/ide/eclipse</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a specific profile (ex: "eXo")</p>
</li>
<li>
<p>Use the file <a href="../resources/ide/eclipse/exo-Java-CodeStyle-Formatter.xml">exo-Java-CodeStyle-Formatter.xml</a> for "Eclipse Java Formatter config file"</p>
</li>
<li>
<p>Use the file <a href="../resources/ide/eclipse/exo-Java-CodeStyle-OrganizeImports.importorder">exo-Java-CodeStyle-OrganizeImports.importorder</a> for "Optimize Imports from file"</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/intellij-eclipse-code-formatter.png" alt="IntelliJ Eclipse Code Formatter">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="id-build-management">3. Build Management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="id-maven-setup-guide">3.1. Maven - Setup guide</h3>
<div class="sect3">
<h4 id="id-prerequisites">3.1.1. Prerequisites</h4>
<div class="paragraph">
<p>To build eXo projects you need to install a Java <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK</a> 6, 7 or 8 depending of the Platform version you are targeting :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Platform 5.0</strong>: <code><strong>Java 8 / Maven 3.3.9</strong></code></p>
</li>
<li>
<p>Platform 4.4+ : <code>Java 8 / Maven 3.2.x (PLF &amp; GateIn components) / Maven 3.0.x (CF components)</code></p>
</li>
<li>
<p>Platform 4.1 / 4.2 / 4.3 : <code>Java 7 / Maven 3.2.x (PLF) / Maven 3.0.x (GateIn &amp; CF components)</code></p>
</li>
<li>
<p>Platform 4.0.x : <code>Java 6</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="id-install-apache-maven">3.1.2. Install Apache Maven</h4>
<div class="paragraph">
<p>The version <strong>3.3.9</strong> of <a href="http://maven.apache.org/download.cgi">Apache Maven</a> is currently recommended to build eXo projects.<br></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<em>The minimal version required is 3.0.4.<br>
The version 3.2.2 must be avoided due to <a href="https://jira.codehaus.org/browse/MNG-5663">MNG-5663</a>.</em>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download a fresh and clean copy of <a href="http://maven.apache.org/download.cgi">Apache Maven</a>. It is critical to take a fresh copy to be sure that the file <code>apache-maven-X.Y.Z/conf/settings.xml</code> isn&#8217;t modified !!</p>
</li>
<li>
<p>Unzip the distribution archive, i.e. apache-maven-X.Y.Z-bin.(zip|tar.gz) to the directory you wish to install Maven. The subdirectory <code>apache-maven-X.Y.Z</code> will be created from the archive. It is recommended to not store it under a path with spaces.</p>
</li>
<li>
<p>Add the path of <code>apache-maven-X.Y.Z/bin</code> in your <code>PATH</code> environment variable.</p>
<div class="ulist">
<ul>
<li>
<p>On Windows use the preferences screen of "Environment Variables"</p>
</li>
<li>
<p>On Linux/MacOS export the variable PATH from a startup script like .bash_profile (it depends of the OS and the shell you are using)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Add a system environment variable <code>MAVEN_OPTS</code> (it could be in a .profile startup script on Linux/MacOS operating systems or in the global environment variables panel on Windows)with the value <code>-Xshare:auto -Xms128M -Xmx1G -XX:MaxPermSize=256M</code></p>
</li>
<li>
<p>Run <code>mvn --version</code> to verify that it is correctly installed.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Additional documentations</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.sonatype.com/books/mvnref-book/reference/installation.html">Maven: The Complete Reference - Chapter 2. Installing Maven</a></p>
</li>
<li>
<p><a href="http://maven.apache.org/download.html">Maven website - Installing Maven</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Maven and MacOSX</div>
<div class="paragraph">
<p>Apple provides for several years now, Maven as a standard tool in MacOSX distributions.
You can see the version provided with <code>mvn --version</code>.
You can find where the mvn script is located with which mvn (in theory in /usr/bin).
It recommended to deactivate the one provided with MacOS X to use the one you&#8217;ll define yourself.
Take care if you upgrade your system, because Apple can restore the default version on your system.
To deactivate the Maven version bundled in OSX, just remove the symlink : <code>sudo rm /usr/bin/mvn</code></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="id-configure-apache-maven">3.1.3. Configure Apache Maven</h4>
<div class="sect4">
<h5 id="id-basic-setup">3.1.3.1. Basic setup</h5>
<div class="paragraph">
<p>Since Platform 4, no specific settings are required to build eXo public projects. Just clone any project and launch <code>mvn install</code></p>
</div>
</div>
<div class="sect4">
<h5 id="id-advanced-setup">3.1.3.2. Advanced setup</h5>
<div class="paragraph">
<p>If you need to release a project or to build a project relying on private or staging binaries you&#8217;ll need to customize your maven settings.</p>
</div>
<div class="paragraph">
<p>Using <a href="../resources/build/maven/settings.xml">our template</a> create a file <code>settings.xml</code> in your <code>home directory</code> under a directory called <code>.m2</code> (if you already launched maven this directory must already exist and it should contain a subdirectory <code>repository</code> where Maven stores all artifacts it processes).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;settings
  xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;
  &lt;servers&gt;
    &lt;!-- eXo Platform credentials --&gt;
    &lt;!-- Used to upload binaries on repository.exoplatform.org --&gt;
    &lt;server&gt;
      &lt;id&gt;repository.exoplatform.org&lt;/id&gt;
      &lt;username&gt;&lt;!-- Your eXo LDAP/Crowd Identifier --&gt;&lt;/username&gt;
      &lt;password&gt;&lt;!-- Your eXo LDAP/Crowd Password --&gt;&lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- Used to download private binaries from repository.exoplatform.org --&gt;
    &lt;server&gt;
      &lt;id&gt;exo.private&lt;/id&gt;
      &lt;username&gt;&lt;!-- Your eXo LDAP/Crowd Identifier --&gt;&lt;/username&gt;
      &lt;password&gt;&lt;!-- Your eXo LDAP/Crowd Password --&gt;&lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- Used to download staging binaries from repository.exoplatform.org --&gt;
    &lt;server&gt;
      &lt;id&gt;exo.staging&lt;/id&gt;
      &lt;username&gt;&lt;!-- Your eXo LDAP/Crowd Identifier --&gt;&lt;/username&gt;
      &lt;password&gt;&lt;!-- Your eXo LDAP/Crowd Password --&gt;&lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- Used to download custom projects binaries from repository.exoplatform.org --&gt;
    &lt;server&gt;
      &lt;id&gt;exo.cp&lt;/id&gt;
      &lt;username&gt;&lt;!-- Your eXo LDAP/Crowd Identifier --&gt;&lt;/username&gt;
      &lt;password&gt;&lt;!-- Your eXo LDAP/Crowd Password --&gt;&lt;/password&gt;
    &lt;/server&gt;
    &lt;!-- Used to release projects on repository.jboss.org --&gt;
     &lt;server&gt;
      &lt;id&gt;jboss-releases-repository&lt;/id&gt;
      &lt;username&gt;&lt;!-- Your JBoss.org Identifier --&gt;&lt;/username&gt;
      &lt;password&gt;&lt;!-- Your JBoss.org Password --&gt;&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
  &lt;mirrors&gt;
    &lt;mirror&gt;
      &lt;id&gt;exo-mirror&lt;/id&gt;
      &lt;mirrorOf&gt;external:*,!exo.private,!exo.cp,!exo.staging&lt;/mirrorOf&gt;
      &lt;url&gt;https://repository.exoplatform.org/public&lt;/url&gt;
    &lt;/mirror&gt;
  &lt;/mirrors&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;exo-central&lt;/id&gt;
      &lt;!-- This "hack" change the behavior of maven to let it use our public mirror
      as the central repository (with snapshots activation).
      The URL is never used and is overrided by the mirror entry.
      --&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;central&lt;/id&gt;
          &lt;url&gt;http://fake&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;central&lt;/id&gt;
          &lt;url&gt;http://fake&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
    &lt;!-- Specific settings used while releasing a project --&gt;
    &lt;profile&gt;
      &lt;id&gt;exo-release&lt;/id&gt;
      &lt;properties&gt;
        &lt;gpg.keyname&gt;&lt;!-- The GPG Key to use to sign eXo releases --&gt;&lt;/gpg.keyname&gt;
        &lt;gpg.passphrase&gt;&lt;!-- The passphrase of your GPG Key --&gt;&lt;/gpg.passphrase&gt;
      &lt;/properties&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;exo-private&lt;/id&gt;
      &lt;!-- Repositories to download eXo private binaries --&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;exo.private&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/private&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;exo.private&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/private&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;!-- Repositories to download eXo custom projects binaries and products patchs --&gt;
      &lt;id&gt;exo-cp&lt;/id&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;exo.cp&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/cp&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;exo.cp&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/cp&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;exo-staging&lt;/id&gt;
      &lt;!-- Repositories to download eXo staging binairies --&gt;
      &lt;!-- TAKE CARE TO ACTIVATE IT ONLY IF REQUIRED --&gt;
      &lt;!-- These repositories are delivering binaries marked as released but allowed to be replaced --&gt;
      &lt;!-- Maven never updates released binaries thus you have to cleanup your local repository to grab an updated version --&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;exo.staging&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/staging&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;exo.staging&lt;/id&gt;
          &lt;url&gt;https://repository.exoplatform.org/staging&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
    &lt;profile&gt;
      &lt;id&gt;jboss-staging&lt;/id&gt;
      &lt;!-- Repositories to download JBoss staging binairies --&gt;
      &lt;!-- TAKE CARE TO ACTIVATE IT ONLY IF REQUIRED --&gt;
      &lt;!-- These repositories are delivering binaries marked as released but allowed to be replaced --&gt;
      &lt;!-- Maven never updates released binaries thus you have to cleanup your local repository to grab an updated version --&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;jboss.staging&lt;/id&gt;
          &lt;url&gt;https://repository.jboss.org/nexus/content/groups/staging/&lt;/url&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;jboss.staging&lt;/id&gt;
          &lt;url&gt;https://repository.jboss.org/nexus/content/groups/staging/&lt;/url&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
    &lt;!-- This profile is always activated and let you define properties for dependent environment stuffs --&gt;
    &lt;profile&gt;
      &lt;id&gt;local-properties&lt;/id&gt;
      &lt;properties&gt;
        &lt;!--
        &lt;exo.projects.directory.dependencies&gt;${user.home}/Applications&lt;/exo.projects.directory.dependencies&gt;
        &lt;exo.projects.app.tomcat.version&gt;apache-tomcat-6.0.29&lt;/exo.projects.app.tomcat.version&gt;
        &lt;exo.projects.app.jboss.version&gt;jboss-5.1.0.GA&lt;/exo.projects.app.jboss.version&gt;
        --&gt;
      &lt;/properties&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
  &lt;activeProfiles&gt;
    &lt;!-- make these profiles active all the time --&gt;
    &lt;activeProfile&gt;exo-central&lt;/activeProfile&gt;
    &lt;activeProfile&gt;local-properties&lt;/activeProfile&gt;
  &lt;/activeProfiles&gt;
&lt;/settings&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>~/.m2/settings.xml</code> configuration file you have to fill your credentials to access to protected binaries or to publish artifacts on repository.exoplatform.org. For a better security, you can encrypt passwords in your settings file, however you must first configure a master password. For more information on both server passwords and the master password, see the <a href="http://maven.apache.org/guides/mini/guide-encryption.html">Guide to password encryption</a> and the dedicated chapter in the <a href="http://www.sonatype.com/books/mvnref-book/reference/appendix-settings-sect-encrypting-passwords.html">Maven Reference Guide</a>. To release a project you have also to define the GPG key to use and its passphase (see <a href="#GPG">the GPG setup guide</a>).</p>
</div>
<div class="paragraph">
<p>When your setup is done you can activate the following profiles :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-Pexo-release</code> : Automatically activated while releasing projects. This profile is also activated on our CI server. Your GPG key must be configured (see <a href="#GPG">the GPG setup guide</a>).</p>
</li>
<li>
<p><code>-Pexo-private</code> : To access to private binaries on repository.exoplatform.org (eXo employees only).</p>
</li>
<li>
<p><code>-Pexo-staging</code> : To access to staging binaries (releases in validation) on repository.exoplatform.org (eXo employees only). <strong>TAKE CARE TO ACTIVATE IT ONLY IF REQUIRED.</strong> These repositories are delivering binaries considered by maven as released but allowed to be replaced. Maven never updates released binaries thus you have to cleanup your local repository to grab an updated version.</p>
</li>
<li>
<p><code>-Pexo-cp</code> : To access to custom projects binaries on repository.exoplatform.org (eXo employees only).</p>
</li>
<li>
<p><code>-Pjboss-staging</code> : To access to staging binaries on repository.jboss.org. <strong>TAKE CARE TO ACTIVATE IT ONLY IF REQUIRED.</strong> These repositories are delivering binaries considered by maven as released but allowed to be replaced. Maven never updates released binaries thus you have to cleanup your local repository to grab an updated version.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="GPG">3.1.3.3. Maven and GPG</h5>
<div class="sect5">
<h6 id="id-install-gnupg-for-your-os">Install gnupg for your OS.</h6>
<div class="sect6">
<h7 id="id-macos">MacOS</h7>
<div class="paragraph">
<p>For <a href="http://brew.sh/">homebrew</a> users :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">brew install gnupg</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <a href="https://www.macports.org/">macport</a> users :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">sudo port install gnupg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Others, you can use the <a href="http://macgpg.sourceforge.net/">native package</a>.</p>
</div>
</div>
<div class="sect6">
<h7 id="id-ubuntu">Ubuntu</h7>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">sudo aptitude install gnupg</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="id-windows">Windows</h7>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-validate-your-installation">Validate your installation</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ gpg --version
gpg (GnuPG) 1.4.10
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html[http://gnu.org/licenses/gpl.html]
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Home: ~/.gnupg
Supported algorithms:
Pubkey: RSA, RSA-E, RSA-S, ELG-E, DSA
Cipher: 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128,
 CAMELLIA192, CAMELLIA256
Hash: MD5, SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
Compression: Uncompressed, ZIP, ZLIB, BZIP2</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-generate-your-private-gpg-key">Generate your private GPG Key</h6>
<div class="sect6">
<h7 id="id-configure-gpg">Configure GPG</h7>
<div class="paragraph">
<p>Enforce the level of encryption. Edit <code>~/.gnupg/gpg.conf</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ vi .gnupg/gpg.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the end of the file add :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">personal-digest-preferences SHA512
cert-digest-algo SHA512
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES CAST5 ZLIB BZIP2 ZIP Uncompressed</code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="id-generate-the-key">Generate the key</h7>
<div class="paragraph">
<p>Launch the key generation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ gpg --gen-key</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>ALWAYS SELECT DEFAULT CHOICES AND DON&#8217;T USE AN EMPTY PASSPHRASE</strong></p>
</div>
<div class="paragraph">
<p>Enter your personal information like here :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Real Name : Arnaud Héritier</p>
</li>
<li>
<p>Comment : eXo Platform CODE SIGNING KEY</p>
</li>
<li>
<p>Email Address : <a href="mailto:arnaud.heritier@exoplatform.com">arnaud.heritier@exoplatform.com</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your key is created.</p>
</div>
<div class="paragraph">
<p>You can list the key you just generated with :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ gpg --list-key
pub 4096R/2CF0CC82 2009-11-17
uid Arnaud Héritier (eXo Platform CODE SIGNING KEY) arnaud.heritier@exoplatform.com
sub 4096R/37540EAE 2009-11-17</code></pre>
</div>
</div>
<div class="paragraph">
<p>You send your key to a PGP server (you use the ID from the "pub" line)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ gpg --keyserver hkp://pgp.mit.edu[hkp://pgp.mit.edu] --send-keys 2CF0CC82</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your GPG key is now ready to be used</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-configure-your-gpg-key-for-maven">Configure your GPG Key for Maven</h6>
<div class="paragraph">
<p>Fill the GPG keyname and passphrase in the exo-release profile of your maven settings like described in <a href="#Advanced">Advanced settings</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"> &lt;profile&gt;
   &lt;id&gt;exo-release&lt;/id&gt;
   &lt;properties&gt;
     &lt;gpg.keyname&gt;2CF0CC82&lt;/gpg.keyname&gt;&lt;!-- This is the public ID is displayed with the gpg list-key command described above --&gt;
     &lt;gpg.passphrase&gt;My awesome passphrase&lt;/gpg.passphrase&gt;
   &lt;/properties&gt;
 &lt;/profile&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="id-test-it">Test it</h6>
<div class="paragraph">
<p>Clone this project : <code>git@github.com:exodev/maven-sandbox-project.git</code></p>
</div>
<div class="paragraph">
<p>Launch the command : <code>mvn install -Pexo-release</code></p>
</div>
<div class="paragraph">
<p>You should see .asc files installed along others artifacts in the <code>target</code> directory of the project</p>
</div>
<div class="paragraph">
<p>To end tests, try to release this project : <code>mvn release:prepare</code> followed by <code>mvn release:perform</code>.</p>
</div>
<div class="paragraph">
<p><strong>You are ready. Your environment is setup to do a release with GPG signature.</strong></p>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to logon into <a href="https://repository.exoplatform.org">https://repository.exoplatform.org</a> and drop your staging repository</p>
</div>
</div>
<div class="sect5">
<h6 id="id-more-info">More info</h6>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.sonatype.com/people/2010/01/how-to-generate-pgp-signatures-with-maven/">http://www.sonatype.com/people/2010/01/how-to-generate-pgp-signatures-with-maven/</a></p>
</li>
<li>
<p><a href="http://www.apache.org/dev/release-signing.html">http://www.apache.org/dev/release-signing.html</a></p>
</li>
<li>
<p><a href="http://www.apache.org/dev/publishing-maven-artifacts.html#gpg">http://www.apache.org/dev/publishing-maven-artifacts.html#gpg</a></p>
</li>
<li>
<p><a href="http://maven.apache.org/plugins/maven-gpg-plugin">http://maven.apache.org/plugins/maven-gpg-plugin</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="id-development">4. Development</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="id-test">4.1. Test</h3>
<div class="paragraph">
<p>eXo Platform is delivered as a zip bundle, built on every commit, and available in our <a href="https://repository.exoplatform.org/">maven repository</a>
and in our <a href="http://acceptance.exoplatform.org/">acceptance platform</a>.</p>
</div>
<div class="paragraph">
<p>If you want to test the zip bundle with one of the supported databases, it is recommended to use the available Docker images.</p>
</div>
<div class="sect3">
<h4 id="id-databases">4.1.1. Databases</h4>
<div class="paragraph">
<p>eXo Platform uses by default an HSQLDB database.
eXo Platform supports several RDBMS databases, each of them in multiple versions.
In order to test easily all these versions, it is recommended to use Docker containers.</p>
</div>
<div class="paragraph">
<p>First, setup eXo to connect to your database following the <a href="https://docs.exoplatform.org/public/topic/PLF50/PLFAdminGuide.Database.ConfiguringPLF.html?cp=5_2_3_1">eXo documentation</a>.
Then start the database container.</p>
</div>
<div class="sect4">
<h5 id="id-mysql">4.1.1.1. MySQL</h5>
<div class="paragraph">
<p>There is no specific Docker image for MySQL for eXo, you should use the official image from <a href="https://hub.docker.com/_/mysql/">Docker hub</a>.
For example this command starts a MySQL database server exposed on the default port (3306) and creates a database <code>plf</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker run -d --name mysql-5.7.22 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=plf -e MYSQL_DATABASE=plf mysql:5.7.22</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can connect from your eXo instance with the user <code>root</code> and the password <code>plf</code>.
Please refer to the <a href="https://hub.docker.com/_/mysql/">Docker hub page</a> for full details and configuration options.</p>
</div>
</div>
<div class="sect4">
<h5 id="id-postgresql">4.1.1.2. PostgreSQL</h5>
<div class="paragraph">
<p>There is no specific Docker image for PostgreSQL for eXo, you should use the official image from <a href="https://hub.docker.com/_/postgres/">Docker hub</a>.
For example this command starts a PostgreSQL 9.6.6 database server exposed on the default port (5432) and creates a database <code>plf</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker run -d --name postgres-9.6.6 -p 5432:5432 -e POSTGRES_PASSWORD=plf -e POSTGRES_DB=plf postgres:9.6.6</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can connect from your eXo instance with the user <code>postgres</code> and the password <code>plf</code>.
Please refer to the <a href="https://hub.docker.com/_/postgres/">Docker hub page</a> for full details and configuration options.</p>
</div>
</div>
<div class="sect4">
<h5 id="id-oracle">4.1.1.3. Oracle</h5>
<div class="paragraph">
<p>A Docker image for Oracle database has been created and pushed to <a href="https://hub.docker.com/r/exoplatform/oracle/">Docker hub</a> for testing purpose.
Here is a command example to start an Oracle 12cR2 database server exposed on the default port (1521) with a database <code>plf</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker run -d --name oracle -p 1521:1521 exoplatform/oracle:12cR2_plf</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can connect from your eXo instance with the SID <code>plf</code>, the user <code>plf</code> and the password <code>plf</code>.
Please refer to the <a href="https://hub.docker.com/r/exoplatform/oracle/">Docker hub page</a> for full details and configuration options.</p>
</div>
</div>
<div class="sect4">
<h5 id="id-sql-server">4.1.1.4. SQL Server</h5>
<div class="paragraph">
<p>A Docker image for SQL Sserver database has been created and pushed to <a href="https://hub.docker.com/r/exoplatform/sqlserver/">Docker hub</a> for testing purpose.
Here is a command example to start a SQL Server 2017 database server exposed on the default port (1433) and creates a database <code>plf</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">docker run -d --name sqlserver -p 1433:1433 -e SA_PASSWORD=Mypassword1 -e SQLSERVER_DATABASE=plf -e SQLSERVER_USER=plf -e SQLSERVER_PASSWORD=Mypassword1 exoplatform/sqlserver:2017-CU2</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can connect from your eXo instance with the the user <code>plf</code> and the password <code>Mypassword1</code> (All your password must match the SQL Server rule : at least 8 chars, with lower, upper and digits).
Please refer to the <a href="https://hub.docker.com/r/exoplatform/sqlserver/">Docker hub page</a> for full details and configuration options.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="id-translations">4.2. Translations</h3>
<div class="paragraph">
<p>All the translations are managed in <a href="https://crowdin.com">Crowdin</a>.
For each PLF version, a Crowdin project is created and linked.
A synchronization between the eXo source code and Crowdin is performed once per day.</p>
</div>
<div class="sect3">
<h4 id="id-how-to-update-an-existing-translation-string">4.2.1. How to update an existing translation string?</h4>
<div class="paragraph">
<p>Updating a string must be done in Crowdin directly (if it is done in the source code, it will be reset by the next synchronization).
Once validated the translated string will be pushed in the sources during the next synchronization.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-how-to-add-a-new-translation-string-in-an-existing-localization-file">4.2.2. How to add a new translation string in an existing localization file?</h4>
<div class="paragraph">
<p>In order to add a new string, simply add it in the master localization file.
The master localization file is the file without a language suffix if it exists, for example <code>resources.properties</code>.
Otherwise it is the english version, for example <code>resources_en.properties</code>.
It will automatically be added in Crowdin during the next synchronization.
You can add the string in others localization files, for testing purpose, but it will be reset during the next synchronization.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-how-to-delete-a-translation-string">4.2.3. How to delete a translation string?</h4>
<div class="paragraph">
<p>Deleting a string must be done in the sources by simply removing the string in all the localization files containing this string.
The string will be automatically deleted in Crowdin during the next synchronization.</p>
</div>
</div>
<div class="sect3">
<h4 id="id-how-to-add-a-new-localization-file">4.2.4. How to add a new localization file?</h4>
<div class="paragraph">
<p>All localization files of a given project must be referenced in the file translations.properties located at the root of the project.
Each line must be formatted as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">crowdin-path=source-path</code></pre>
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>crowdin-path</strong> is the path of the localization file in Crowdin relative to the root of the Crowdin project</p>
</li>
<li>
<p><strong>source-path</strong> is the path of the english (en) localization file in the project sources, relative to the value of the property "baseDir"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">baseDir=platform/calendar/
webapp/CalendarPortlet.properties=calendar-webapp/src/main/resources/locale/portlet/calendar/CalendarPortlet_en.properties</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="openblock float-group" style="padding-top:10px;border-top: 1px solid #dddddd; background-color:#f2f2f2">
<div class="content"  id="partners" >
<div class="paragraph right">
<p><span class="image"><a class="image" href="https://www.jetbrains.com/idea/" target="IntellIJ IDEA"><img src="images/logo-intellij-idea.png" alt="IntellIJ IDEA" width="40px" title="IntellIJ IDEA"></a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</div>
<div class="paragraph right">
<p>
<span class="image"><a class="image" href="https://crowdin.net/"><img src="images/logo-crowdin.png" target="crowdin" alt="Crowdin" width="200px" title="Crowdin"></a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</div>
<div class="paragraph right">
<p>
<span class="image"><a class="image" href="https://www.ej-technologies.com/products/jprofiler/overview.html" target="jprofiler"><img src="images/logo-jprofiler.png" alt="JProfiler" width="40px" title="JProfiler"></a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>